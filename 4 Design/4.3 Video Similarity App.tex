\section{Video Similarity Application}
To perform computations on encrypted floating-point numbers, we utilize the CKKS scheme [11] with a polynomial modulus degree of 4096. CKKS is a homomorphic encryption scheme to perform computations of approximate arithmetic on real numbers. This scheme offers out-of-the-box support for decimal value computations compared to other schemes like BFV and BGV, which primarily focus on integer arithmetic. The choice of 4096 as the polynomial modulus degree balances the need for strong security and accuracy with practical computational performance. While a larger degree enhances security and allows for more operations before result degradation, with the trade off of increasing computation time and ciphertext size.

In order to detect similarities between two videos, we represent each video as a probability distribution of byte size changes between one-second segments, shown in Figure \ref{fig:preprocess-data-flow}. To transform raw video into comparable probability distributions, we count the number of bytes in each frame, calculate the sum of frame lengths in each segment, and then normalize the array of segments between zero and one, known as a Probability Distribution Form (PDF), ensuring that the distributions for both videos have the same scale and can be directly compared. This approach is borrowed from the Similarity of Simultaneous Observation [12], and provides strong privacy guarantees, as if the encryption is broken, the raw byte data cannot be reconstructed from the normalized byte array due to the loss of information during the aggregation and normalization process. We have considered a motion estimation approach with the Lucas-Kanade method [23] supported by OpenCV, which could provide more detailed information about video content. However, for this study, it is crucial to compare our approach to the established baseline metrics, and new methods would hinder this comparison.

\begin{figure}[ht]
    \centering
    \includegraphics[width=\textwidth]{4 Design/4.3 Preprocess Data Flow.png}
    \caption{Pre-process Data Flow}
    \label{fig:preprocess-data-flow}
\end{figure}

To compute multiple similarity scores using homomorphic encryption, separate byte arrays are encrypted for each score. The recipient can perform computations with plaintext decimal values against the corresponding encrypted element in the array. This approach leverages the unique ability of fully homomorphic encryption and was borrowed from Pop-Share, as this approach is much faster than comparing ciphertext against ciphertext. 
For Kullback-Leibler Divergence, we share the PDF and the natural log of the PDF. For each encrypted double in the PDF, we subtract the natural log of the plaintext element and multiply the difference. The product remains encrypted and returned to the originator, where it can be decrypted and the summation is the similarity score.
For Bhattacharyya Coefficent, we share the square root of the PDF. For each encrypted double, we multiply the ciphertext by the square root of the plaintext element. The product remains encrypted and returned to the originator, where it can be decrypted and the summation is the similarity score.
For Cramer Distance, we share Cumulative Distribution Form (CDF) from PDF. The CDF is the cumulative sum of all of the elements in the PDF, such that the last value of CDF is equal to 1. For each encrypted double, we square the difference of the plaintext element. The product remains encrypted and returned to the originator, where it can be decrypted and the square root of the summation is the similarity score.
